# 🧘 Zen MCP Server - 智能 AI 协作平台

<div align="center">

[![版本](https://img.shields.io/badge/version-5.8.1-blue.svg)](https://github.com/gptopencn/xtool_mcp_server/releases)
[![许可证](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.9+-yellow.svg)](https://www.python.org/)
[![MCP](https://img.shields.io/badge/MCP-Compatible-purple.svg)](https://modelcontextprotocol.io/)

</div>

## 🌟 概述

Zen MCP Server 是一个基于模型上下文协议（MCP）的智能 AI 协作平台，提供了一套强大的工具集，帮助开发者利用多个 AI 模型进行高效的软件开发、问题解决和创意探索。

### ✨ 核心特性

- **🧠 多模型支持**：集成 Google Gemini、OpenAI、OpenRouter、X.AI 等多个 AI 提供商
- **🔧 丰富的工具集**：18+ 个专业工具，涵盖开发、调试、规划、安全审计等各个方面
- **💭 深度思考模式**：25 种专家思维模式，提供多角度的问题分析
- **📝 智能记忆系统**：三层记忆架构（全局/项目/会话），实现知识持久化
- **🔄 工作流编排**：支持多步骤、多工具的复杂工作流
- **🌍 国际化支持**：完整的 UTF-8 支持，适合全球开发者

## 🚀 快速开始

### 系统要求

- Python 3.9 或更高版本
- 至少一个 AI 提供商的 API 密钥
- Claude Desktop 或支持 MCP 的客户端

### 安装步骤

1. **克隆仓库**
```bash
git clone https://github.com/gptopencn/xtool_mcp_server.git
cd xtool_mcp_server
```

2. **运行设置脚本**
```bash
./run-server.sh
```

这个脚本会自动：
- 创建虚拟环境
- 安装所有依赖
- 配置 Claude Desktop
- 设置 API 密钥

3. **配置 API 密钥**

在 `.env` 文件中设置您的 API 密钥：
```env
# Google Gemini (推荐)
GEMINI_API_KEY=your_gemini_api_key

# OpenRouter (访问多个模型)
OPENROUTER_API_KEY=your_openrouter_api_key

# OpenAI
OPENAI_API_KEY=your_openai_api_key

# X.AI (Grok)
XAI_API_KEY=your_xai_api_key
```

4. **重启 Claude Desktop**

配置完成后，重启 Claude Desktop 以加载 Zen MCP Server。

## 🛠️ 可用工具

### 💭 思考和分析工具

| 工具 | 描述 | 使用场景 |
|------|------|----------|
| **thinkdeep** | 扩展推理和深度分析 | 复杂问题解决、架构设计 |
| **thinkboost** | 快速结构化思考 | 日常分析、快速决策 |
| **analyze** | 深入代码和文档分析 | 代码审查、文档理解 |
| **challenge** | 批判性思维和假设挑战 | 方案验证、风险评估 |

### 💻 开发工具

| 工具 | 描述 | 使用场景 |
|------|------|----------|
| **codereview** | 全面的代码审查 | 代码质量提升、最佳实践 |
| **debug** | 智能调试助手 | 问题诊断、错误修复 |
| **refactor** | 代码重构建议 | 代码优化、架构改进 |
| **testgen** | 测试用例生成 | 单元测试、集成测试 |
| **docgen** | 文档自动生成 | API 文档、用户手册 |

### 🔍 安全和质量工具

| 工具 | 描述 | 使用场景 |
|------|------|----------|
| **secaudit** | 安全漏洞审计 | 代码安全检查、漏洞发现 |
| **precommit** | 提交前检查 | 代码规范、质量保证 |
| **tracer** | 执行流程追踪 | 性能分析、流程理解 |

### 📋 规划和管理工具

| 工具 | 描述 | 使用场景 |
|------|------|----------|
| **planner** | 项目规划助手 | 任务分解、时间估算 |
| **memory** | 智能记忆管理 | 知识保存、上下文回忆 |
| **consensus** | 多模型共识 | 重要决策、多角度验证 |

### 💬 交互工具

| 工具 | 描述 | 使用场景 |
|------|------|----------|
| **chat** | 自由对话 | 头脑风暴、创意探索 |
| **listmodels** | 查看可用模型 | 模型选择、配置确认 |
| **version** | 版本信息 | 系统状态、更新检查 |

## 📖 使用示例

### 深度思考复杂问题
```
使用 thinkdeep 工具：
"我需要设计一个高并发的消息队列系统，请帮我深入分析架构选择"
```

### 代码审查和优化
```
使用 codereview 工具：
"请审查这段代码并提供改进建议：[粘贴代码]"
```

### 智能调试
```
使用 debug 工具：
"我遇到了这个错误：[错误信息]，代码是：[相关代码]"
```

### 项目规划
```
使用 planner 工具：
"帮我规划一个电商网站的开发计划，包括技术栈选择和时间安排"
```

## 🧠 思维模式

Zen 集成了 25 种专家思维模式，包括：

- **系统思维**：整体视角分析
- **批判性思维**：质疑和验证
- **创造性思维**：创新解决方案
- **分析思维**：深入分解问题
- **战略思维**：长期规划
- **还有更多...**

## 💾 记忆系统

### 三层架构

1. **全局记忆**：跨项目的持久知识
2. **项目记忆**：特定项目的上下文
3. **会话记忆**：当前对话的临时信息

### 使用记忆
```
# 保存重要信息
使用 memory 工具：
"保存：项目使用 React + TypeScript，后端是 Node.js"

# 回忆信息
使用 memory 工具：
"回忆：项目技术栈"
```

## 🔧 高级配置

### 环境变量

```bash
# 默认模型设置
DEFAULT_MODEL=gemini-2.5-flash

# 启用增强记忆
ENABLE_ENHANCED_MEMORY=true

# 日志级别
LOG_LEVEL=INFO

# 禁用特定工具
DISABLED_TOOLS=tool1,tool2
```

### 模型选择

- **自动模式**（默认）：Zen 自动为每个任务选择最佳模型
- **手动指定**：在工具调用时指定 `model` 参数

## 🐛 故障排除

### 常见问题

1. **"No API keys configured"**
   - 确保在 `.env` 文件中设置了至少一个 API 密钥
   - 运行 `source .env` 加载环境变量

2. **工具无响应**
   - 检查日志：`tail -f logs/mcp_server.log`
   - 确保 Claude Desktop 已重启

3. **模型不可用**
   - 使用 `listmodels` 工具查看可用模型
   - 检查 API 密钥是否有效

### 获取帮助

- 查看详细日志：`logs/mcp_server.log`
- 活动日志：`logs/mcp_activity.log`
- 提交问题：[GitHub Issues](https://github.com/gptopencn/xtool_mcp_server/issues)

## 🤝 贡献

欢迎贡献！请查看 [贡献指南](docs/contributions.md)。

### 开发设置

1. Fork 并克隆仓库
2. 创建功能分支
3. 运行测试：`./code_quality_checks.sh`
4. 提交 Pull Request

## 📄 许可证

本项目采用 MIT 许可证。详见 [LICENSE](LICENSE) 文件。

## 🙏 致谢

- Claude 团队的 MCP 协议
- 所有贡献者和用户
- 开源社区的支持

---

<div align="center">
使用 Zen MCP Server 提升您的 AI 协作体验 🚀
</div>